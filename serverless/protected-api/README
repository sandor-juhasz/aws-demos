This project implements a serverless RESTful API which is protected
with IAM authorization. Only an AWS user with the proper access policy
can access the API.


edl-setenv owner-sand
aws-login
vagrant up
vagrant ssh

# inside the SSH session

export AWS_PROFILE=owner-sand
cd /vagrant/protected-api-serverless
serverless deploy


cd ../api-cli
pip3 install -e .
export PATH=$PATH:/.local/bin

# Log into the AWS Console create keys for both test users.
# set them up with
aws configure --profile api-client-test
aws configure --profile api-client-test2

# Test the API
# Service endpoint URL can be queried from the cloudformation or from the output
# of the serverless deploy command

export AWS_PROFILE=api-client-test
call-protected-api "https://muj81b11ub.execute-api.us-east-1.amazonaws.com/dev/hello"
export AWS_PROFILE=api-client-test2
call-protected-api "https://muj81b11ub.execute-api.us-east-1.amazonaws.com/dev/hello"

